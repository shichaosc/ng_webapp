/*
 * promoBox v1.7 - Simple JavaScript Promo Popup
 * https://github.com/rolandtoth/promoBox
 * last update: 2014.06.25.
 *
 * Licensed under the MIT license.
 * Copyright 2014 Roland Toth (tpr)
 *
 */
var PBlib=(function(){"use strict";if(!Array.prototype.indexOf)Array.prototype.indexOf=function(c,d){var a=d||0,b=this.
length;for(a;a<b;a=a+1)if(this[a]===c)return a;return-1};return{cookie:{createCookie:function(d,e,b){var c="",a;if(b&&b
!=="session"){a=new Date();a.setTime(a.getTime()+b*24*60*60*1000);c="; expires="+a.toGMTString()}document.cookie=d+"="+e
+c+"; path=/;"},readCookie:function(e){var b,a,d=e+"=",c=document.cookie.split(";");for(b=0;b<c.length;b+=1){a=c[b];
while(a.charAt(0)===" ")a=a.substring(1,a.length);if(a.indexOf(d)===0)return a.substring(d.length,a.length)}return null}
,eraseCookie:function(a){this.createCookie(a,"",-1)}},addEvent:function(a,b,c){if(a.addEventListener)a.addEventListener(
b,c,false);else a.attachEvent("on"+b,function(d){return c.call(a,d)})},addClass:function(b,a){b.className+=" "+a},
makeElement:function(e,b,d){var c=document.createElement(e),a;for(a in b)if(b.hasOwnProperty(a))if(b[a])c.setAttribute(a
,b[a]);if(d)c.innerHTML=d;return c},callCallBack:function(a){if(typeof window[a]==="function")window[a]()},loadSprite:
function(c,b){var a=new Image();a.onload=b;a.src=c},isArray:function(a){return Object.prototype.toString.call(a)===
"[object Array]"},findInArray:function(a,c){var b;if(!a)return false;if(PBlib.isArray(a)&&a.length===0)return false;a=
typeof a==="string"?[a]:a;for(b=0;b<a.length;b=b+1)if(c.indexOf(a[b])!==-1)return true;return false},preventDefault:
function(a){if(a.preventDefault)a.preventDefault();else a.returnValue=false},checkRandomSeed:function(a){var b=Math.
floor(Math.random()*(1/a));return b===0}}})(),promoBox=function(k){"use strict";var j,s,u,t=document.
getElementsByTagName("head")[0],r=document.body,p=window.location.href;j={addStyles:function(){if(k.disableStyles)
return false;var a=[
"#promoContainer { opacity: 0; position: fixed; width: 100%; height: 100%; text-align: center; top: 0; left: 0; z-index: 9991; pointer-events: none; }"
,
'#promoOverlay { position: fixed; width: 100%; height: 100%; top: 0; left: 0; zoom: 1; z-index: 9990; background: #000; background: rgba(0, 0, 0, 0.6); -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)"; filter: alpha(opacity=60); pointer-events: all; }'
,
"#promoContent { position: relative; display: inline-block; top: 10%; max-width: 80%; height: auto; z-index: 9992; pointer-events: all; }"
,
"#promoImage { height: auto; width: auto; max-width: 100%; max-height: 75%; box-sizing: border-box; display: block; border: 8px solid #fff; }"
,
"#promoClose { position: absolute; top: 0; right: 0; display: block; line-height: 16px; text-align: right; padding: 24px 28px; color: #000; z-index: 9992; font-family: sans-serif; font-size: 17px; opacity: 0.6; transition: 0.1s all; text-decoration: none; }"
,"#promoClose:hover { opacity: 1; cursor: pointer; }",
"#promoButtons { position: absolute; bottom: 0; width: 100%; padding: 24px 0; }",
"#promoButtons a { display: inline-block; text-decoration: none; padding: 5px 16px; background: #fff; text-align: center; margin: 0 6px; color: #000; }"
].join("");if(k.interstitialDuration)a+=[
'#promoOverlay { background: #fff; -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)"; filter: alpha(opacity=100);}'
,"#interstitialText { z-index: 9998; position: fixed; top: 0; left: 0; width: 100%; pointer-events: all; }",
"#interstitialSkipText { text-decoration: underline; color: inherit; }","#promoImage { border: none; }"].join("");if(k.
fadeInDuration>0)a+=[("#promoContainer { -webkit-animation: promoFadeIn "+k.fadeInDuration+
"s ease-in; animation: promoFadeIn "+k.fadeInDuration+
"s ease-in; -webkit-animation-fill-mode: forwards; animation-fill-mode: forwards; }"),
"@-webkit-keyframes promoFadeIn { from {opacity: 0} to {opacity: 1} }",
"@keyframes promoFadeIn { from {opacity: 0} to {opacity: 1} }"].join("");else a+="#promoContainer { opacity: 1 }";if(k.
fadeOutDuration>0)a+=[("#promoContainer.fadeOut { -webkit-animation: promoFadeOut "+k.fadeOutDuration+
"s ease-out; animation: promoFadeOut "+k.fadeOutDuration+"s ease-out; }"),
"@-webkit-keyframes promoFadeOut { from {opacity: 1} to {opacity: 0} }",
"@keyframes promoFadeOut { from {opacity: 1} to {opacity: 0} }"].join("");if(!k.showScrollbar){a+=
"html { overflow: hidden !important; }";if(window.innerHeight<r.scrollHeight)a+="body { width: "+r.offsetWidth+"px; }"}j
.styles=PBlib.makeElement("style",{id:"promoStyle",type:"text/css"});if(j.styles.styleSheet)j.styles.styleSheet.cssText=
a;else j.styles.appendChild(document.createTextNode(a));if(t.firstChild)t.insertBefore(j.styles,t.firstChild);else t.
appendChild(j.styles)},init:function(){var d,b,f,g,e,c=Math.round(new Date().getTime()/1000);if(!k.imagePath)
return false;k.actionButtons=k.actionButtons||null;k.autoCloseSeconds=k.autoCloseSeconds||null;k.className=k.className||
null;k.closeButtonText=k.closeButtonText||null;k.deleteCookieOnUrl=k.deleteCookieOnUrl||null;k.disableCloseButton=k.
disableCloseButton||null;k.disableCloseOnClick=k.disableCloseOnClick||false;k.disableOverlay=k.disableOverlay||null;k.
disableOverlayClose=k.disableOverlayClose||null;k.disableStyles=k.disableStyles||null;k.endDate=k.endDate||null;k.
fadeInDuration=k.fadeInDuration||0;k.fadeOutDuration=k.fadeOutDuration||0;k.forceOnUrl=k.forceOnUrl||null;k.frequency=k.
frequency||null;k.hideOnUrl=k.hideOnUrl||null;k.interstitialDuration=k.interstitialDuration||null;k.interstitialSkipText
=k.interstitialSkipText||"Skip this ad";k.interstitialText=k.interstitialText||"or wait %s secs";k.link=k.link||null;k.
loadDelay=k.loadDelay||null;k.randomWeight=k.randomWeight||1;k.showOnUrl=k.showOnUrl||null;k.showScrollbar=k.
showScrollbar||false;k.startDate=k.startDate||null;k.target=k.target||"_self";f=k.randomWeight&&!PBlib.checkRandomSeed(k
.randomWeight);d=!!k.forceOnUrl&&PBlib.findInArray(k.forceOnUrl,p);b=!!k.deleteCookieOnUrl&&PBlib.findInArray(k.
deleteCookieOnUrl,p);g=(function(a){if(!a||PBlib.isArray(a)&&!a.length)return false;if(!!a&&!PBlib.findInArray(a,p))
return true})(k.showOnUrl);e=!!k.hideOnUrl&&PBlib.findInArray(k.hideOnUrl,p);if(!d){if(f)return false;if(k.startDate){k.
startDate=Math.round(new Date(k.startDate).getTime()/1000);if(c<k.startDate)return false}if(k.endDate){k.endDate=Math.
round(new Date(k.endDate).getTime()/1000);if(c>k.endDate)return false}if(b)PBlib.cookie.eraseCookie("promoBox");if(k.
frequency){if(PBlib.cookie.readCookie("promoBox"))return false;if(!b)PBlib.cookie.createCookie("promoBox","1",k.
frequency)}if(g)return false;if(e)return false}if(b)PBlib.cookie.eraseCookie("promoBox");if(k.interstitialDuration){k.
disableOverlay=false;k.disableOverlayClose=true;k.disableCloseButton=true;k.closeButtonText=null;k.autoCloseSeconds=k.
interstitialDuration}return true},buildPromo:function(){var a=0;this.promo={overlay:PBlib.makeElement("div",{id:
"promoOverlay"}),container:PBlib.makeElement("div",{id:"promoContainer"}),content:PBlib.makeElement("div",{id:
"promoContent"}),image:PBlib.makeElement("img",{id:"promoImage",src:k.imagePath}),close:PBlib.makeElement("a",{id:
"promoClose",href:"#"},k.closeButtonText||"\xD7"),buttons:PBlib.makeElement("div",{id:"promoButtons"})};if(k.
interstitialDuration){this.promo.interstitialCounter='<span id="interstitialCounter">'+k.interstitialDuration+"</span>";
k.interstitialText=k.interstitialText.replace("%s",this.promo.interstitialCounter);this.promo.interstitialText=PBlib.
makeElement("p",{id:"interstitialText"},"&nbsp;"+k.interstitialText);this.promo.interstitialSkipText=PBlib.makeElement(
"a",{id:"interstitialSkipText",href:"#"},k.interstitialSkipText);this.promo.interstitialText.insertBefore(this.promo.
interstitialSkipText,this.promo.interstitialText.firstChild);this.promo.container.appendChild(this.promo.
interstitialText);PBlib.addClass(this.promo.container,"interstitial")}if(k.link){this.promo.link=PBlib.makeElement("a",{
id:"promoLink",href:k.link,target:k.target});this.promo.content.appendChild(this.promo.link);this.promo.link.appendChild
(this.promo.image)}else this.promo.content.appendChild(this.promo.image);if(!k.disableOverlay)this.promo.container.
appendChild(this.promo.overlay);if(!k.disableCloseButton)this.promo.content.appendChild(this.promo.close);if(k.
actionButtons&&k.actionButtons.length){for(a=0;a<k.actionButtons.length;a=a+1)this.promo.buttons.appendChild(PBlib.
makeElement("a",{href:k.actionButtons[a][1]||"#promoClose",target:k.actionButtons[a][2]||"","class":k.actionButtons[a][3
]||""},k.actionButtons[a][0]));this.promo.content.appendChild(this.promo.buttons)}if(k.className)PBlib.addClass(this.
promo.container,k.className);this.promo.container.appendChild(this.promo.content);r.appendChild(this.promo.container)},
addListeners:function(){var a,c=document.getElementById("promoButtons"),d=function(b){return j.events.openLink(b,this.
href||"#promoClose",this.target||"_self")};if(!k.disableCloseButton)PBlib.addEvent(this.promo.close,"click",this.events.
close);if(!k.disableOverlayClose)PBlib.addEvent(this.promo.overlay,"click",this.events.close);if(c&&c.childNodes)for(a=0
;a<c.childNodes.length;a=a+1)PBlib.addEvent(c.childNodes[a],"click",d);if(k.link)PBlib.addEvent(this.promo.link,"click",
function(b){j.events.openLink(b,k.link,k.target)});if(!k.disableKeyClose)PBlib.addEvent(document,"keydown",this.events.
keyClose);if(k.interstitialDuration){PBlib.addEvent(this.promo.interstitialSkipText,"click",this.events.close);u=
setInterval(function(){var b=document.getElementById("interstitialCounter");if(b&&b.innerHTML>0)b.innerHTML=b.innerHTML-
1;else return false},1000)}if(k.autoCloseSeconds)this.events.autoClose()},events:{destroyPromo:function(){if(j.promo.
container)r.removeChild(j.promo.container);if(j.styles)j.styles.parentNode.removeChild(j.styles);j=null},close:function(
a){if(a)PBlib.preventDefault(a);if(!j)return false;PBlib.callCallBack("promoBoxClose");if(j.promo.container)if(k.
fadeOutDuration>0){PBlib.addClass(j.promo.container,"fadeOut");setTimeout(function(){if(j)j.events.destroyPromo()},k.
fadeOutDuration*1000)}else j.events.destroyPromo();if(s)clearTimeout(s);if(u)clearInterval(u)},autoClose:function(){s=
setTimeout(function(){j.events.close()},k.autoCloseSeconds*1000)},keyClose:function(a){if(j&&a.keyCode===27)j.events.
close()},openLink:function(b,a,c){if(b)PBlib.preventDefault(b);PBlib.callCallBack("promoBoxClick");if(a.indexOf(
"#promoClose")===-1)window.open(a,c);if(!k.disableCloseOnClick||a.indexOf("#promoClose")!==-1)j.events.close()}},
startPromo:function(){PBlib.callCallBack("promoBoxStart");j.addStyles();j.buildPromo();j.addListeners()}};if(j.init())
PBlib.loadSprite(k.imagePath,function(){window.promoBoxInstanceID=clearTimeout(window.promoBoxInstanceID)||setTimeout(
function(){j.startPromo()},k.loadDelay*1000)})}